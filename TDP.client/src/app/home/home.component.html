
<!-- User Listing Section -->
<div class="row mt-4">
  <div class="col-12">
    <div class="card">
             <div class="card-header bg-primary text-white">
         <h5 class="card-title mb-0">
           <i class="fas fa-users me-2"></i>{{ 'home.userManagement' | translate }}
           <div class="float-end">
             <!-- Current User Info -->
             <div class="d-inline-block me-3" *ngIf="currentUser">
               <span class="badge bg-light text-dark">
                 <i class="fas fa-user me-1"></i>
                 {{ currentUser.name || currentUser.username || 'User' }}
               </span>
               <small class="d-block text-light mt-1" *ngIf="currentUser.email">
                 <i class="fas fa-envelope me-1"></i>
                 {{ currentUser.email }}
               </small>
             </div>
                           <button type="button" class="btn btn-outline-light btn-sm me-2" (click)="refreshUsers()" [disabled]="isLoading">
                <i class="fas fa-sync-alt me-1"></i>
                <span *ngIf="!isLoading">{{ 'home.refresh' | translate }}</span>
                <span *ngIf="isLoading">{{ 'home.loading' | translate }}</span>
              </button>
           </div>
         </h5>
       </div>
      <div class="card-body">
        <!-- Loading State -->
        <div *ngIf="isLoading" class="text-center py-4">
          <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">{{ 'home.loading' | translate }}</span>
          </div>
          <p class="mt-2 text-muted">{{ 'home.loadingUsers' | translate }}</p>
        </div>

        <!-- Error State -->
        <div *ngIf="errorMessage && !isLoading" class="alert alert-danger">
          <i class="fas fa-exclamation-triangle me-2"></i>{{ errorMessage }}
          <button type="button" class="btn btn-outline-danger btn-sm ms-3" (click)="loadUsers()">
            <i class="fas fa-redo me-1"></i>{{ 'home.retry' | translate }}
          </button>
        </div>

        <!-- Users Table -->
        <div *ngIf="!isLoading && !errorMessage" class="table-responsive">
          <table class="table table-hover table-striped">
            <thead class="table-dark">
              <tr>
                <th scope="col">#</th>
                <th scope="col">{{ 'home.username' | translate }}</th>
                <th scope="col">{{ 'home.email' | translate }}</th>
                <th scope="col">{{ 'home.status' | translate }}</th>
                <th scope="col">{{ 'home.actions' | translate }}</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let user of users; let i = index">
                <td>{{ i + 1 }}</td>
                <td>
                  <i class="fas fa-user me-2 text-primary"></i>
                  {{ user.username }}
                </td>
                <td>
                  <i class="fas fa-envelope me-2 text-info"></i>
                  {{ user.email }}
                </td>
                <td>
                  <span class="badge" [ngClass]="{
                    'bg-success': user.status === 'active',
                    'bg-warning': user.status === 'pending',
                    'bg-danger': user.status === 'inactive'
                  }">
                    <i class="fas fa-circle me-1"></i>
                    {{ user.status }}
                  </span>
                </td>
                <td>
                  <div class="btn-group" role="group">
                    <button type="button" class="btn btn-outline-primary btn-sm" [title]="'home.viewUser' | translate">
                      <i class="fas fa-eye"></i>
                    </button>
                    <button type="button" class="btn btn-outline-warning btn-sm" [title]="'home.editUser' | translate">
                      <i class="fas fa-edit"></i>
                    </button>
                    <button type="button" class="btn btn-outline-danger btn-sm" [title]="'home.deleteUser' | translate" 
                            (click)="deleteUser(user.id)">
                      <i class="fas fa-trash"></i>
                    </button>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>

          <!-- Empty State -->
          <div *ngIf="users.length === 0" class="text-center py-4">
            <i class="fas fa-users text-muted" style="font-size: 3rem;"></i>
            <h5 class="text-muted mt-3">{{ 'home.noUsersFound' | translate }}</h5>
            <p class="text-muted">{{ 'home.noUsersMessage' | translate }}</p>
          </div>
        </div>

        <!-- User Count -->
        <div *ngIf="!isLoading && !errorMessage" class="mt-3">
          <small class="text-muted">
            <i class="fas fa-info-circle me-1"></i>
            {{ 'home.totalUsers' | translate }}: {{ users.length }}
          </small>
        </div>
      </div>
    </div>
  </div>
</div>
